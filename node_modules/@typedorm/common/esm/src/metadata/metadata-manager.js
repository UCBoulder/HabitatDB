import { MetadataStorage } from './metadata-storage';
const metadataKey = Symbol.for('DynamoDBMetadataStorageKey');
export class MetadataManager {
    constructor() { }
    static createMetadataStorage() {
        if (!global[metadataKey]) {
            global[metadataKey] = new MetadataStorage();
        }
        return global[metadataKey];
    }
    static get metadataStorage() {
        if (!global[metadataKey]) {
            return MetadataManager.createMetadataStorage();
        }
        return global[metadataKey];
    }
    static resetMetadata() {
        global[metadataKey];
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWV0YWRhdGEtbWFuYWdlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL2NvbW1vbi9zcmMvbWV0YWRhdGEvbWV0YWRhdGEtbWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFDbkQsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0FBRTdELE1BQU0sT0FBTyxlQUFlO0lBQzFCLGdCQUF1QixDQUFDO0lBRWpCLE1BQU0sQ0FBQyxxQkFBcUI7UUFDakMsSUFBSSxDQUFFLE1BQWMsQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUNoQyxNQUFjLENBQUMsV0FBVyxDQUFDLEdBQUcsSUFBSSxlQUFlLEVBQUUsQ0FBQztTQUN0RDtRQUNELE9BQVEsTUFBYyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFTSxNQUFNLEtBQUssZUFBZTtRQUMvQixJQUFJLENBQUUsTUFBYyxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQ2pDLE9BQU8sZUFBZSxDQUFDLHFCQUFxQixFQUFFLENBQUM7U0FDaEQ7UUFDRCxPQUFRLE1BQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQsTUFBTSxDQUFDLGFBQWE7UUFDakIsTUFBYyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQy9CLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7TWV0YWRhdGFTdG9yYWdlfSBmcm9tICcuL21ldGFkYXRhLXN0b3JhZ2UnO1xuY29uc3QgbWV0YWRhdGFLZXkgPSBTeW1ib2wuZm9yKCdEeW5hbW9EQk1ldGFkYXRhU3RvcmFnZUtleScpO1xuXG5leHBvcnQgY2xhc3MgTWV0YWRhdGFNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgcHVibGljIHN0YXRpYyBjcmVhdGVNZXRhZGF0YVN0b3JhZ2UoKTogTWV0YWRhdGFTdG9yYWdlIHtcbiAgICBpZiAoIShnbG9iYWwgYXMgYW55KVttZXRhZGF0YUtleV0pIHtcbiAgICAgIChnbG9iYWwgYXMgYW55KVttZXRhZGF0YUtleV0gPSBuZXcgTWV0YWRhdGFTdG9yYWdlKCk7XG4gICAgfVxuICAgIHJldHVybiAoZ2xvYmFsIGFzIGFueSlbbWV0YWRhdGFLZXldO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXQgbWV0YWRhdGFTdG9yYWdlKCk6IE1ldGFkYXRhU3RvcmFnZSB7XG4gICAgaWYgKCEoZ2xvYmFsIGFzIGFueSlbbWV0YWRhdGFLZXldKSB7XG4gICAgICByZXR1cm4gTWV0YWRhdGFNYW5hZ2VyLmNyZWF0ZU1ldGFkYXRhU3RvcmFnZSgpO1xuICAgIH1cbiAgICByZXR1cm4gKGdsb2JhbCBhcyBhbnkpW21ldGFkYXRhS2V5XTtcbiAgfVxuXG4gIHN0YXRpYyByZXNldE1ldGFkYXRhKCkge1xuICAgIChnbG9iYWwgYXMgYW55KVttZXRhZGF0YUtleV07XG4gIH1cbn1cbiJdfQ==