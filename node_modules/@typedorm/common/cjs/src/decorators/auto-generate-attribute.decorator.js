"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AutoGenerateAttribute = void 0;
const metadata_manager_1 = require("../metadata/metadata-manager");
const error_1 = require("../error");
function AutoGenerateAttribute(options) {
    return (target, propertyKey) => {
        const reflectedMetadata = Reflect.getMetadata('design:type', target, propertyKey);
        if (!reflectedMetadata) {
            throw new error_1.MissingReflectMetadataError('design:type');
        }
        const attributeProps = {
            name: propertyKey.toString(),
            type: reflectedMetadata.name,
            strategy: options.strategy,
            autoUpdate: options.autoUpdate,
            hidden: options.hidden,
        };
        if (options.strategy)
            metadata_manager_1.MetadataManager.metadataStorage.addRawAttribute(target.constructor, attributeProps);
    };
}
exports.AutoGenerateAttribute = AutoGenerateAttribute;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0by1nZW5lcmF0ZS1hdHRyaWJ1dGUuZGVjb3JhdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvY29tbW9uL3NyYy9kZWNvcmF0b3JzL2F1dG8tZ2VuZXJhdGUtYXR0cmlidXRlLmRlY29yYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSxtRUFBNkQ7QUFFN0Qsb0NBQXFEO0FBc0JyRCxTQUFnQixxQkFBcUIsQ0FDbkMsT0FBc0M7SUFFdEMsT0FBTyxDQUFDLE1BQU0sRUFBRSxXQUFXLEVBQUUsRUFBRTtRQUM3QixNQUFNLGlCQUFpQixHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQzNDLGFBQWEsRUFDYixNQUFNLEVBQ04sV0FBVyxDQUNaLENBQUM7UUFFRixJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDdEIsTUFBTSxJQUFJLG1DQUEyQixDQUFDLGFBQWEsQ0FBQyxDQUFDO1NBQ3REO1FBRUQsTUFBTSxjQUFjLEdBQTRDO1lBQzlELElBQUksRUFBRSxXQUFXLENBQUMsUUFBUSxFQUFFO1lBQzVCLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxJQUFJO1lBQzVCLFFBQVEsRUFBRSxPQUFPLENBQUMsUUFBUTtZQUMxQixVQUFVLEVBQUUsT0FBTyxDQUFDLFVBQVU7WUFDOUIsTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNO1NBQ3ZCLENBQUM7UUFFRixJQUFJLE9BQU8sQ0FBQyxRQUFRO1lBQ2xCLGtDQUFlLENBQUMsZUFBZSxDQUFDLGVBQWUsQ0FDN0MsTUFBTSxDQUFDLFdBQVcsRUFDbEIsY0FBYyxDQUNmLENBQUM7SUFDTixDQUFDLENBQUM7QUFDSixDQUFDO0FBNUJELHNEQTRCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QVVUT19HRU5FUkFURV9BVFRSSUJVVEVfU1RSQVRFR1l9IGZyb20gJy4uL2VudW1zJztcbmltcG9ydCB7TWV0YWRhdGFNYW5hZ2VyfSBmcm9tICcuLi9tZXRhZGF0YS9tZXRhZGF0YS1tYW5hZ2VyJztcbmltcG9ydCB7QXV0b0dlbmVyYXRlQXR0cmlidXRlUmF3TWV0YWRhdGFPcHRpb25zfSBmcm9tICcuLi9tZXRhZGF0YS9tZXRhZGF0YS1zdG9yYWdlJztcbmltcG9ydCB7TWlzc2luZ1JlZmxlY3RNZXRhZGF0YUVycm9yfSBmcm9tICcuLi9lcnJvcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0b0dlbmVyYXRlZEF0dHJpYnV0ZU9wdGlvbnMge1xuICAvKipcbiAgICogQXV0byBnZW5lcmF0ZSBzdHJhdGVneSB0byB1c2VcbiAgICovXG4gIHN0cmF0ZWd5OiBBVVRPX0dFTkVSQVRFX0FUVFJJQlVURV9TVFJBVEVHWTtcblxuICAvKipcbiAgICogRGVmaW5lcyB3aGV0aGVyIHRoZSBhdHRyaWJ1dGUgdmFsdWVzIHNob3VsZCBiZSBhdXRvIHVwZGF0ZWQgd2hlbiBhbnkgd3JpdGUgb3BlcmF0aW9uIG9jY3Vyc1xuICAgKiBoYXBwZW5zIChpLmUgdXBkYXRlZEF0IG9uIGVudGl0aWVzKVxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgYXV0b1VwZGF0ZT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIERlZmluZXMgd2hldGhlciB0aGUgYXR0cmlidXRlIHNob3VsZCBiZSBoaWRkZW4gZnJvbSByZXNwb25zZSByZXR1cm5lZCB0byBjbGllbnRcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGhpZGRlbj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBBdXRvR2VuZXJhdGVBdHRyaWJ1dGUoXG4gIG9wdGlvbnM6IEF1dG9HZW5lcmF0ZWRBdHRyaWJ1dGVPcHRpb25zXG4pOiBQcm9wZXJ0eURlY29yYXRvciB7XG4gIHJldHVybiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkgPT4ge1xuICAgIGNvbnN0IHJlZmxlY3RlZE1ldGFkYXRhID0gUmVmbGVjdC5nZXRNZXRhZGF0YShcbiAgICAgICdkZXNpZ246dHlwZScsXG4gICAgICB0YXJnZXQsXG4gICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG5cbiAgICBpZiAoIXJlZmxlY3RlZE1ldGFkYXRhKSB7XG4gICAgICB0aHJvdyBuZXcgTWlzc2luZ1JlZmxlY3RNZXRhZGF0YUVycm9yKCdkZXNpZ246dHlwZScpO1xuICAgIH1cblxuICAgIGNvbnN0IGF0dHJpYnV0ZVByb3BzOiBBdXRvR2VuZXJhdGVBdHRyaWJ1dGVSYXdNZXRhZGF0YU9wdGlvbnMgPSB7XG4gICAgICBuYW1lOiBwcm9wZXJ0eUtleS50b1N0cmluZygpLFxuICAgICAgdHlwZTogcmVmbGVjdGVkTWV0YWRhdGEubmFtZSxcbiAgICAgIHN0cmF0ZWd5OiBvcHRpb25zLnN0cmF0ZWd5LFxuICAgICAgYXV0b1VwZGF0ZTogb3B0aW9ucy5hdXRvVXBkYXRlLFxuICAgICAgaGlkZGVuOiBvcHRpb25zLmhpZGRlbixcbiAgICB9O1xuXG4gICAgaWYgKG9wdGlvbnMuc3RyYXRlZ3kpXG4gICAgICBNZXRhZGF0YU1hbmFnZXIubWV0YWRhdGFTdG9yYWdlLmFkZFJhd0F0dHJpYnV0ZShcbiAgICAgICAgdGFyZ2V0LmNvbnN0cnVjdG9yLFxuICAgICAgICBhdHRyaWJ1dGVQcm9wc1xuICAgICAgKTtcbiAgfTtcbn1cbiJdfQ==