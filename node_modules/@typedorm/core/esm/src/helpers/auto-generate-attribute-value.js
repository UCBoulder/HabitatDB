import KSUID from 'ksuid';
import { AUTO_GENERATE_ATTRIBUTE_STRATEGY, UnknownAttributeValueGenerationStrategyError, } from '@typedorm/common';
import { v4 } from 'uuid';
export class AutoGenerateAttributeValue {
    static get UUID4() {
        return autoGenerateValue(AUTO_GENERATE_ATTRIBUTE_STRATEGY.UUID4);
    }
    static get KSUID() {
        return autoGenerateValue(AUTO_GENERATE_ATTRIBUTE_STRATEGY.KSUID);
    }
    static get ISO_DATE() {
        return autoGenerateValue(AUTO_GENERATE_ATTRIBUTE_STRATEGY.ISO_DATE);
    }
    static get EPOCH_DATE() {
        return autoGenerateValue(AUTO_GENERATE_ATTRIBUTE_STRATEGY.EPOCH_DATE);
    }
}
export function autoGenerateValue(strategy) {
    switch (strategy) {
        case AUTO_GENERATE_ATTRIBUTE_STRATEGY.UUID4: {
            return v4();
        }
        case AUTO_GENERATE_ATTRIBUTE_STRATEGY.KSUID: {
            return KSUID.randomSync(new Date()).string;
        }
        case AUTO_GENERATE_ATTRIBUTE_STRATEGY.ISO_DATE: {
            return new Date().toISOString();
        }
        case AUTO_GENERATE_ATTRIBUTE_STRATEGY.EPOCH_DATE: {
            return Math.ceil(new Date().valueOf() / 1000);
        }
        default: {
            throw new UnknownAttributeValueGenerationStrategyError(strategy);
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0by1nZW5lcmF0ZS1hdHRyaWJ1dGUtdmFsdWUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy9jb3JlL3NyYy9oZWxwZXJzL2F1dG8tZ2VuZXJhdGUtYXR0cmlidXRlLXZhbHVlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUMxQixPQUFPLEVBQ0wsZ0NBQWdDLEVBQ2hDLDRDQUE0QyxHQUM3QyxNQUFNLGtCQUFrQixDQUFDO0FBQzFCLE9BQU8sRUFBQyxFQUFFLEVBQUMsTUFBTSxNQUFNLENBQUM7QUFFeEIsTUFBTSxPQUFPLDBCQUEwQjtJQUNyQyxNQUFNLEtBQUssS0FBSztRQUNkLE9BQU8saUJBQWlCLENBQUMsZ0NBQWdDLENBQUMsS0FBSyxDQUFXLENBQUM7SUFDN0UsQ0FBQztJQUVELE1BQU0sS0FBSyxLQUFLO1FBQ2QsT0FBTyxpQkFBaUIsQ0FBQyxnQ0FBZ0MsQ0FBQyxLQUFLLENBQVcsQ0FBQztJQUM3RSxDQUFDO0lBRUQsTUFBTSxLQUFLLFFBQVE7UUFDakIsT0FBTyxpQkFBaUIsQ0FDdEIsZ0NBQWdDLENBQUMsUUFBUSxDQUNoQyxDQUFDO0lBQ2QsQ0FBQztJQUVELE1BQU0sS0FBSyxVQUFVO1FBQ25CLE9BQU8saUJBQWlCLENBQ3RCLGdDQUFnQyxDQUFDLFVBQVUsQ0FDbEMsQ0FBQztJQUNkLENBQUM7Q0FDRjtBQUVELE1BQU0sVUFBVSxpQkFBaUIsQ0FBQyxRQUEwQztJQUMxRSxRQUFRLFFBQVEsRUFBRTtRQUNoQixLQUFLLGdDQUFnQyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzNDLE9BQU8sRUFBRSxFQUFFLENBQUM7U0FDYjtRQUNELEtBQUssZ0NBQWdDLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDM0MsT0FBTyxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUM7U0FDNUM7UUFDRCxLQUFLLGdDQUFnQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzlDLE9BQU8sSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztTQUNqQztRQUNELEtBQUssZ0NBQWdDLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDaEQsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7U0FDL0M7UUFDRCxPQUFPLENBQUMsQ0FBQztZQUNQLE1BQU0sSUFBSSw0Q0FBNEMsQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUNsRTtLQUNGO0FBQ0gsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBLU1VJRCBmcm9tICdrc3VpZCc7XG5pbXBvcnQge1xuICBBVVRPX0dFTkVSQVRFX0FUVFJJQlVURV9TVFJBVEVHWSxcbiAgVW5rbm93bkF0dHJpYnV0ZVZhbHVlR2VuZXJhdGlvblN0cmF0ZWd5RXJyb3IsXG59IGZyb20gJ0B0eXBlZG9ybS9jb21tb24nO1xuaW1wb3J0IHt2NH0gZnJvbSAndXVpZCc7XG5cbmV4cG9ydCBjbGFzcyBBdXRvR2VuZXJhdGVBdHRyaWJ1dGVWYWx1ZSB7XG4gIHN0YXRpYyBnZXQgVVVJRDQoKSB7XG4gICAgcmV0dXJuIGF1dG9HZW5lcmF0ZVZhbHVlKEFVVE9fR0VORVJBVEVfQVRUUklCVVRFX1NUUkFURUdZLlVVSUQ0KSBhcyBzdHJpbmc7XG4gIH1cblxuICBzdGF0aWMgZ2V0IEtTVUlEKCkge1xuICAgIHJldHVybiBhdXRvR2VuZXJhdGVWYWx1ZShBVVRPX0dFTkVSQVRFX0FUVFJJQlVURV9TVFJBVEVHWS5LU1VJRCkgYXMgc3RyaW5nO1xuICB9XG5cbiAgc3RhdGljIGdldCBJU09fREFURSgpIHtcbiAgICByZXR1cm4gYXV0b0dlbmVyYXRlVmFsdWUoXG4gICAgICBBVVRPX0dFTkVSQVRFX0FUVFJJQlVURV9TVFJBVEVHWS5JU09fREFURVxuICAgICkgYXMgc3RyaW5nO1xuICB9XG5cbiAgc3RhdGljIGdldCBFUE9DSF9EQVRFKCkge1xuICAgIHJldHVybiBhdXRvR2VuZXJhdGVWYWx1ZShcbiAgICAgIEFVVE9fR0VORVJBVEVfQVRUUklCVVRFX1NUUkFURUdZLkVQT0NIX0RBVEVcbiAgICApIGFzIG51bWJlcjtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXV0b0dlbmVyYXRlVmFsdWUoc3RyYXRlZ3k6IEFVVE9fR0VORVJBVEVfQVRUUklCVVRFX1NUUkFURUdZKSB7XG4gIHN3aXRjaCAoc3RyYXRlZ3kpIHtcbiAgICBjYXNlIEFVVE9fR0VORVJBVEVfQVRUUklCVVRFX1NUUkFURUdZLlVVSUQ0OiB7XG4gICAgICByZXR1cm4gdjQoKTtcbiAgICB9XG4gICAgY2FzZSBBVVRPX0dFTkVSQVRFX0FUVFJJQlVURV9TVFJBVEVHWS5LU1VJRDoge1xuICAgICAgcmV0dXJuIEtTVUlELnJhbmRvbVN5bmMobmV3IERhdGUoKSkuc3RyaW5nO1xuICAgIH1cbiAgICBjYXNlIEFVVE9fR0VORVJBVEVfQVRUUklCVVRFX1NUUkFURUdZLklTT19EQVRFOiB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIH1cbiAgICBjYXNlIEFVVE9fR0VORVJBVEVfQVRUUklCVVRFX1NUUkFURUdZLkVQT0NIX0RBVEU6IHtcbiAgICAgIHJldHVybiBNYXRoLmNlaWwobmV3IERhdGUoKS52YWx1ZU9mKCkgLyAxMDAwKTtcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgdGhyb3cgbmV3IFVua25vd25BdHRyaWJ1dGVWYWx1ZUdlbmVyYXRpb25TdHJhdGVneUVycm9yKHN0cmF0ZWd5KTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==