"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MetadataManager = void 0;
const metadata_storage_1 = require("./metadata-storage");
const metadataKey = Symbol.for('DynamoDBMetadataStorageKey');
class MetadataManager {
    constructor() { }
    static createMetadataStorage() {
        if (!global[metadataKey]) {
            global[metadataKey] = new metadata_storage_1.MetadataStorage();
        }
        return global[metadataKey];
    }
    static get metadataStorage() {
        if (!global[metadataKey]) {
            return MetadataManager.createMetadataStorage();
        }
        return global[metadataKey];
    }
    static resetMetadata() {
        global[metadataKey];
    }
}
exports.MetadataManager = MetadataManager;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWV0YWRhdGEtbWFuYWdlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL2NvbW1vbi9zcmMvbWV0YWRhdGEvbWV0YWRhdGEtbWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx5REFBbUQ7QUFDbkQsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0FBRTdELE1BQWEsZUFBZTtJQUMxQixnQkFBdUIsQ0FBQztJQUVqQixNQUFNLENBQUMscUJBQXFCO1FBQ2pDLElBQUksQ0FBRSxNQUFjLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDaEMsTUFBYyxDQUFDLFdBQVcsQ0FBQyxHQUFHLElBQUksa0NBQWUsRUFBRSxDQUFDO1NBQ3REO1FBQ0QsT0FBUSxNQUFjLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVNLE1BQU0sS0FBSyxlQUFlO1FBQy9CLElBQUksQ0FBRSxNQUFjLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDakMsT0FBTyxlQUFlLENBQUMscUJBQXFCLEVBQUUsQ0FBQztTQUNoRDtRQUNELE9BQVEsTUFBYyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFRCxNQUFNLENBQUMsYUFBYTtRQUNqQixNQUFjLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDL0IsQ0FBQztDQUNGO0FBcEJELDBDQW9CQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7TWV0YWRhdGFTdG9yYWdlfSBmcm9tICcuL21ldGFkYXRhLXN0b3JhZ2UnO1xuY29uc3QgbWV0YWRhdGFLZXkgPSBTeW1ib2wuZm9yKCdEeW5hbW9EQk1ldGFkYXRhU3RvcmFnZUtleScpO1xuXG5leHBvcnQgY2xhc3MgTWV0YWRhdGFNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgcHVibGljIHN0YXRpYyBjcmVhdGVNZXRhZGF0YVN0b3JhZ2UoKTogTWV0YWRhdGFTdG9yYWdlIHtcbiAgICBpZiAoIShnbG9iYWwgYXMgYW55KVttZXRhZGF0YUtleV0pIHtcbiAgICAgIChnbG9iYWwgYXMgYW55KVttZXRhZGF0YUtleV0gPSBuZXcgTWV0YWRhdGFTdG9yYWdlKCk7XG4gICAgfVxuICAgIHJldHVybiAoZ2xvYmFsIGFzIGFueSlbbWV0YWRhdGFLZXldO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXQgbWV0YWRhdGFTdG9yYWdlKCk6IE1ldGFkYXRhU3RvcmFnZSB7XG4gICAgaWYgKCEoZ2xvYmFsIGFzIGFueSlbbWV0YWRhdGFLZXldKSB7XG4gICAgICByZXR1cm4gTWV0YWRhdGFNYW5hZ2VyLmNyZWF0ZU1ldGFkYXRhU3RvcmFnZSgpO1xuICAgIH1cbiAgICByZXR1cm4gKGdsb2JhbCBhcyBhbnkpW21ldGFkYXRhS2V5XTtcbiAgfVxuXG4gIHN0YXRpYyByZXNldE1ldGFkYXRhKCkge1xuICAgIChnbG9iYWwgYXMgYW55KVttZXRhZGF0YUtleV07XG4gIH1cbn1cbiJdfQ==